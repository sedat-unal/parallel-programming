using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApp3
{
    class Program
    {
        static void Main(string[] args)
        {
            int[] A = new int[10000];
            //Random rastgele = new Random();
            for (int i = 0; i < A.Length; i++)
            {
                //A[i] = rastgele.Next(1, 10000);
                A[i] = i;
            }

            int maksimum = 0;
            int divide = 5;
            int everyPiecesLength = A.Length / divide;

            for (int i = 0; i < divide; i++)
            {
                maksimumuBul mb = new maksimumuBul();
                mb.array = A;
                mb.maksimum = maksimum;
                mb.startIndex = i * everyPiecesLength;
                mb.endIndex = mb.startIndex + everyPiecesLength;
                mb.taskID = i;

                Task task = new Task(obj => maksimumFunc((maksimumuBul)obj), mb);
                task.Start();
            }
            Console.Read();
        }

        static int maksimumFunc(maksimumuBul mb)
        {
            for (int i = mb.startIndex + 1; i < mb.endIndex; i++)
            {
                if(mb.array[i - 1] < mb.array[i])
                {
                    mb.maksimum = mb.array[i];
                }
            }
            Console.WriteLine("taskID : {0}, maks : {1}", mb.taskID, mb.maksimum);
            return mb.maksimum;
        }

        public class maksimumuBul
        {
            public int[] array;
            public int maksimum;
            public int startIndex;
            public int endIndex;
            public int taskID;
        }
    }
}
